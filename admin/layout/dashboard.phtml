
<section class="section">
          <div class="row ">
            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="card">
                <div class="card-statistic-4">
                  <div class="align-items-center justify-content-between">
                    <div class="row ">
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pr-0 pt-3">
                        <div class="card-content">
                          <h5 class="font-15">Staff</h5>
                          <h2 class="mb-3 font-18"><?= number_format($db->getValue('staff','count(*)')) ?></h2>
                          <p class="mb-0"><span class="col-green">10%</span> Increase</p>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pl-0">
                        <div class="banner-img">
                          <img src="<?=$wallet['config']['site_url']?>admin/assets/img/banner/1.png" alt="">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="card">
                <div class="card-statistic-4">
                  <div class="align-items-center justify-content-between">
                    <div class="row ">
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pr-0 pt-3">
                        <div class="card-content">
                          <h5 class="font-15"> Visitors</h5>
                          <h2 class="mb-3 font-18"><?= number_format($db->getValue('visitors','count(*)')) ?></h2>
                          <p class="mb-0"><span class="col-orange">09%</span> Decrease</p>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pl-0">
                        <div class="banner-img">
                          <img src="<?=$wallet['config']['site_url']?>admin/assets/img/banner/2.png" alt="">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="card">
                <div class="card-statistic-4">
                  <div class="align-items-center justify-content-between">
                    <div class="row ">
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pr-0 pt-3">
                        <div class="card-content">
                          <h5 class="font-15">Students</h5>
                          <h2 class="mb-3 font-18"><?= number_format($db->getValue('students','count(*)')) ?></h2>
                          <p class="mb-0"><span class="col-green">18%</span>
                            Increase</p>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pl-0">
                        <div class="banner-img">
                          <img src="<?=$wallet['config']['site_url']?>admin/assets/img/banner/3.png" alt="">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-xs-12">
              <div class="card">
                <div class="card-statistic-4">
                  <div class="align-items-center justify-content-between">
                    <div class="row ">
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pr-0 pt-3">
                        <div class="card-content">
                          <h5 class="font-15">Projects</h5>
                          <h2 class="mb-3 font-18"><?= number_format($db->getValue('projects','count(*)')) ?></h2>
                          <p class="mb-0"><span class="col-green">42%</span> Increase</p>
                        </div>
                      </div>
                      <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 pl-0">
                        <div class="banner-img">
                          <img src="<?=$wallet['config']['site_url']?>admin/assets/img/banner/4.png" alt="">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
              <div class="col-12 col-sm-12 col-lg-12">
                  <div class="card">
                      <div class="card-header">
                          <h4>Student Performance Statistics</h4>
                          <div class="card-header-action">
                              <a href="javascript:void(0)" class="btn btn-primary">View All</a>
                          </div>
                      </div>
                      <div class="card-body">
                          <div class="row">
                              <div class="col-lg-12">
                                  <div id="chart"></div>
                                  <div class="row mb-0">
                                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                          <div class="list-inline text-center">
                                              <div class="list-inline-item p-r-30"><i data-feather="arrow-up-circle" class="col-green"></i>
                                                  <?php
                                                  $term1 = getTotalScoresByTerm(1);
                                                  ?>
                                                  <h5 class="m-b-0"><?= $term1 ?></h5>
                                                  <p class="text-muted font-14 m-b-0">Term 1 Scores</p>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                          <div class="list-inline text-center">
                                              <div class="list-inline-item p-r-30"><i data-feather="arrow-down-circle" class="col-orange"></i>
                                                  <?php
                                                  $term2 = getTotalScoresByTerm(2);
                                                  ?>
                                                  <h5 class="m-b-0"><?= $term2 ?></h5>
                                                  <p class="text-muted font-14 m-b-0">Term 2 Scores</p>
                                              </div>
                                          </div>
                                      </div>
                                      <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4">
                                          <div class="list-inline text-center">
                                              <div class="list-inline-item p-r-30"><i data-feather="arrow-up-circle" class="col-green"></i>
                                                  <?php
                                                  $term3 = getTotalScoresByTerm(3);
                                                  ?>
                                                  <h5 class="m-b-0"><?= $term3 ?></h5>
                                                  <p class="text-muted font-14 m-b-0">Term 3 Scores</p>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
        </section>
<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.15/lodash.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script> -->

<?php
// Prepare the data for the chart
$chart_data = json_encode([
    ['term' => 'Term 1', 'total_score' => $term1],
    ['term' => 'Term 2', 'total_score' => $term2],
    ['term' => 'Term 3', 'total_score' => $term3]
], JSON_NUMERIC_CHECK);
?>

<script>
    var chartData = <?php echo $chart_data; ?>;

    function createChart() {
        var chart = new ApexCharts(document.querySelector("#chart"), {
            series: [{
                name: "Total Scores",
                data: chartData.map(function(data) {
                    return data.total_score;
                }),
            }],
            chart: {
                type: "line",
                height: 350
            },
            xaxis: {
                categories: chartData.map(function(data) {
                    return data.term;
                }),
                labels: {
                    style: {
                        colors: "#9aa0ac"
                    }
                }
            },
            yaxis: {
                title: {
                    text: "Total Scores"
                },
                labels: {
                    style: {
                        color: "#9aa0ac"
                    }
                },
                min: 0,
                max: 5,
            },
            dataLabels: {
                enabled: true // Enable data labels to show the scores on the graph
            },
            markers: {
                size: 6
            },
            grid: {
                borderColor: "#e7e7e7",
                row: {
                    colors: ["#f3f3f3", "transparent"], // takes an array which will be repeated on columns
                    opacity: 0.0
                }
            },
        });

        chart.render();
    }

    createChart();
</script>